{% extends "base.html" %}

{% block content %}
<p>Dear {{ hotel_name }},</p>

<p>We have a layover request for your hotel. Please review the details below and confirm your availability.</p>

<!-- Layover Details Box -->
<div class="info-box">
    <h3>üìã Layover Request Details</h3>
    
    <table class="details-table">
        <tr>
            <th width="40%">Request ID</th>
            <td><strong>#{{ layover_id }}</strong></td>
        </tr>
        <tr>
            <th>Route</th>
            <td><strong>{{ origin_station }} ‚Üí {{ destination_station }}</strong></td>
        </tr>
        <tr>
            <th>Check-In</th>
            <td><strong>{{ check_in_date }} at {{ check_in_time }}</strong></td>
        </tr>
        <tr>
            <th>Check-Out</th>
            <td><strong>{{ check_out_date }} at {{ check_out_time }}</strong></td>
        </tr>
        <tr>
            <th>Duration</th>
            <td><strong>{{ duration_hours }} hours</strong></td>
        </tr>
        <tr>
            <th>Number of Crew</th>
            <td><strong>{{ crew_count }} crew members</strong></td>
        </tr>
        <tr>
            <th>Room Breakdown</th>
            <td>
                {% if rooms.singles > 0 %}<strong>{{ rooms.singles }}</strong> Single Room(s)<br>{% endif %}
                {% if rooms.doubles > 0 %}<strong>{{ rooms.doubles }}</strong> Double Room(s)<br>{% endif %}
                {% if rooms.suites > 0 %}<strong>{{ rooms.suites }}</strong> Suite(s){% endif %}
            </td>
        </tr>
        {% if special_requirements %}
        <tr>
            <th>Special Requirements</th>
            <td>{{ special_requirements }}</td>
        </tr>
        {% endif %}
        {% if transport_required %}
        <tr>
            <th>Transport Required</th>
            <td>
                ‚úÖ <strong>Yes</strong>
                {% if transport_details %}
                <br>{{ transport_details }}
                {% endif %}
            </td>
        </tr>
        {% endif %}
    </table>
</div>

<!-- Alert: Response Deadline -->
<div class="alert alert-warning">
    <strong>‚è∞ Please Respond:</strong> This request requires your response within <strong>72 hours</strong>. 
    The confirmation link expires on <strong>{{ token_expires_at }}</strong>.
</div>

<!-- Action Buttons -->
<div style="text-align: center; margin: 40px 0;">
    <p style="margin-bottom: 30px; font-size: 17px; font-weight: 600; color: #333333;">
        Please select one of the following actions:
    </p>
    
    <a href="{{ confirmation_url }}/confirm" class="btn btn-primary">
        ‚úÖ Confirm Booking
    </a>
    
    <a href="{{ confirmation_url }}/decline" class="btn btn-danger">
        ‚ùå Decline Request
    </a>
    
    <a href="{{ confirmation_url }}/request-changes" class="btn btn-warning">
        ‚ö†Ô∏è Request Changes
    </a>
</div>

<!-- Alternative Link -->
<div class="alert alert-info">
    <strong>üí° Tip:</strong> If the buttons above don't work, copy and paste this link into your browser:<br>
    <a href="{{ confirmation_url }}" style="color: #1565c0; word-break: break-all;">{{ confirmation_url }}</a>
</div>

<!-- Contact Information -->
<div style="margin-top: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 6px;">
    <h4 style="margin-top: 0; color: #555555;">üìû Need Assistance?</h4>
    <p style="margin: 5px 0;">
        <strong>Operations Coordinator:</strong> {{ ops_contact_name | default('Operations Team') }}<br>
        <strong>Email:</strong> <a href="mailto:{{ ops_contact_email }}" style="color: #1a73e8;">{{ ops_contact_email }}</a><br>
        {% if ops_contact_phone %}
        <strong>Phone:</strong> {{ ops_contact_phone }}<br>
        {% endif %}
        <strong>Station:</strong> {{ station_name }}
    </p>
</div>

<p style="margin-top: 30px;">Thank you for your partnership!</p>

<p>
    Best regards,<br>
    <strong>{{ app_name }} Operations Team</strong>
</p>
{% endblock %}